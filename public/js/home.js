import Tools from './tools.js';

const progress = Tools.getDataFromStorage()

if(Tools.checkCompletion()){
    document.querySelector('#full-completion').append(
        Tools.createAlert('success',null,"MASTER_FLAG{Y0U_4R3_4_M4573R_0F_X55}")
    )
}

progress.forEach((level) => {
    document.querySelector(`#card-level-${level.level}`).classList.add(getBorderColor(level.success))
    document.querySelector(`#icon-level-${level.level}`).classList.add(...getIcon(level.success))

    if(level.success === true){
        const flagEl = document.createElement('p')
        flagEl.classList.add('text-center','text-success','fst-italic')
        flagEl.textContent = level.flag
        flagEl.style.fontSize = '0.8rem'
        document.querySelector(`#card-level-${level.level} .card-body`).append(flagEl)
    }
})

document.querySelector('#reset-progress').addEventListener('click', () => {
    Tools.resetProgression()
})


function getBorderColor(boolSuccess){
    if(boolSuccess === null){
        return 'border-secondary'
    }else if(boolSuccess){
        return 'border-success'
    }else{
        return 'border-danger'
    }
}

function getIcon(boolSuccess){
    if(boolSuccess === null){
        return ['bi','bi-hourglass', 'text-secondary']
    }else if(boolSuccess){
        return ['bi', 'bi-check-circle', 'text-success']
    }else{
        return ['bi', 'bi-x-circle', 'text-danger']
    }
}